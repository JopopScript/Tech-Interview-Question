# Load Balancer

- Load Balancing
- Scale out, Scale up
- QnA

---

**로드 밸런서란?**

서버에 가해지는 부하(= 로드)를 분산(= 밸런싱) 해주는 장치 또는 기술

**로드 밸런싱이란?**

- 한대의 서버로 부하가 집중되지 않도록 트래픽을 관리해
    
    각 서버가 최적의 퍼포먼스를 낼 수 있도록 분산 시켜주는 네트워크 기법
    
- 트래픽을 분산시켜주는 컴퓨터 네트워크 기법

**트래픽 대처 방법 2가지**

- 스케일 업
- 스케일 아웃

![image](https://user-images.githubusercontent.com/54395509/156918810-8025e9cd-b4ca-4ef3-84cf-566420b22d7b.png)

**스케일 업이란?**

- 서버 자체의 성능을 향상시키는 것
- 서버 CPU/RAM 등 업그레이드
- 단점: 모든 부하가 한 대= 모든 데이터 한 곳에서 처리→ 장애 발생 시 위험
- 데이터 갱신 빈번하게 일어나는 서버에 적합

**스케일 아웃이란?**

- 서버를 여러 대 추가
- 여러 대의 서버로 트래픽을 균등하게 분산 즉, 로드 밸런싱이 반드시 필요
- 다중화→ 서버 장애 발생해도 다른 서버에서 대응 가능
- 단점: 모든 서버가 동일 데이터 가지고 있어야 함
- 데이터 변화가 작은 서버에 적합

**다양한 로드 밸런싱 알고리즘**

- Round Robin Method
- Weighted Round Robin Method
- IP Hash Method
- Least Connection Method
- Least Response Method

**Round Robin Method** 

- 클라이언트 요청을 로드밸런싱 대상 서버에 순서대로 할당
- 순서대로 할당→ 각 서버 동일 스펙, 연결(세션) 짧은 환경에 적합

**Weighted Round Robin Method**

- 각 서버 가중치 설정, 가중치 높은 서버에 클라이언트 요청 우선 배분
- 언제 사용? 서버 트래픽 처리 능력 상이한 경우
- 예: A 서버 가중치 5, B 가중치 2
- A 서버 5개 B 서버 2개 요청 전달

**IP Hash Method**

클라이언트 IP를 특정 서버로 매핑하여 요청을 처리하는 방식

**Least Connection Method**

- 요청 들어온 시점
- 가장 적은 연결 상태 서버에 우선적으로 트래픽 배분
- 언제 사용? 세션이 길어지거나 서버에 분배된 트래픽들이 일정 X

**Least Response Time Method**

- 현재 서버 세션 상태와 응답시간 고려하여 트래픽 분배
- 언제 사용? 가장 짧은 응답시간 서버에 우선 로드를 배분하는 방식

**로드 밸런서 대표**

- L4
- L7

**L4**

- 전송 계층 정보 바탕으로 로드 분산
- 한대의 서버에 각기 다른 포트 번호 부여
- 언제 사용? 다수의 서버 프로그램 운영하는 경우

![image](https://user-images.githubusercontent.com/54395509/156918824-96140868-7407-47bb-bf0a-173175c891ce.png)

**L7**

- 애플리케이션 계층(HTTP, FTP, SMTP) 정보 바탕으로 로드 분산
- HTTP 헤더, 쿠키 등 사용자 요청을 기준으로 특정 서버에 트래픽 분배 가능
- 쉽게 말해, 패킷의 내용을 확인하고 그 내용에 따라 로드를 특정 서버에 분배 가능
- 예: URL 따라 부하 분산, HTTP 헤더 쿠기값 따라 부하 분산 등

![image](https://user-images.githubusercontent.com/54395509/156918834-247f5147-5832-4851-b694-3b0bf28ecff1.png)

---

### 질문 목록

**로드 밸런싱에 대해 설명**

서버에 가해지는 부하를 적절하게 분산시켜주는 장치 또는 기술

**서버 확장 2가지 방법 설명(scale up, scale out)**

- 스케일 업은 서버의 성능 자체를 향상시켜주는 것. 서버 CPU, RAM 등 업그레이드.
- 반면, 스케일 아웃은 서버를 여러 대 증설

**로드 밸런싱 알고리즘 대표(라운드 로빈, 최소 연결 방식) 설명**

**라운드 로빈:** 

- 클라이언트 요청을 각 로드밸런싱 대상 서버에 순서대로 배분.
- 여러 대 서버의 성능이 비슷하고 세션 유지가 짧은 환경 유리

**최소 연결 방식:**

- 가장 연결이 적은 서버 우선 트래픽 배분
- 서버 트래픽 일정하지 않고, 세션 길 때 적합

**L4, L7 로드 밸런싱 설명, 차이 설명**

**L4:**

- 전송 계층 정보로 로드 밸런싱
- 즉, TCP, UDP, IP 정보들을 바탕으로 분산
- 지정된 포트로 로드 밸런싱 가능
- 다수의 서버 프로그램 운영 환경에 유리

**L7:** 

- 어플리케이션 정보로 로드 밸런싱
- HTTP Header, Cookie 등 사용자가 요청한 정보 바탕으로 분산
